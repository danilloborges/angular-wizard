/**
 * Easy to use Wizard library for Angular JS
 * @version v0.10.2 - 2017-04-23 * @link https://github.com/mgonto/angular-wizard
 * @author Martin Gontovnikas <martin@gon.to>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function wizardButtonDirective(a){angular.module("mgo-angular-wizard").directive(a,function(){return{restrict:"A",replace:!1,require:"^wizard",link:function(b,c,d,e){c.on("click",function(c){c.preventDefault(),b.$apply(function(){b.$eval(d[a]),e[a.replace("wz","").toLowerCase()]()})})}}})}angular.module("templates-angularwizard",["step.html","wizard.html"]),angular.module("step.html",[]).run(["$templateCache",function(a){a.put("step.html",'<section ng-show="selected" ng-class="{current: selected, done: completed}" class="step" ng-transclude>\n</section>')}]),angular.module("wizard.html",[]).run(["$templateCache",function(a){a.put("wizard.html",'<div class="row wizard">\n  <div class="col-md-12 wizard-header">\n    <div class="row" ng-if="name || subtitle">\n      <div class="col-md-6">\n        <div class="wizard-title">\n          <h2>{{name}}</h2>\n        </div>\n      </div>\n      <div class="col-md-6">\n        <div class="wizard-subtitle" >\n          <h3>{{subtitle}}</h3>\n        </div>\n      </div>\n    </div>\n  </div>  \n  <div class="wizard-sidebar col-xs-2 col-sm-3 col-md-3">\n    <ul class="nav row" ng-if="!hideIndicators">\n      <li ng-class="{default: !step.completed && !step.selected, current: step.selected && !step.completed, done: step.completed && !step.selected, editing: step.selected && step.completed}" ng-repeat="step in getEnabledSteps()">\n        <a ng-click="goTo(step)">{{::getStepNumber(step)}}<span class="hidden-xs"> {{step.title || step.wzTitle}}<i class="pull-right fa fa-chevron-right"></i></span></a>\n      </li>\n    </ul> \n  </div>\n  <div class="wizard-steps col-xs-10 col-sm-9 col-md-9">\n    <div class="steps" ng-if="indicatorsPosition === \'bottom\'" ng-transclude></div>\n  </div>\n  <div class="wizard-bottom col-md-12">\n    <div class="row">\n      <div class="col-xs-10 col-sm-10 col-md-3">\n        <div class="progress">\n          <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="{{currentStepNumber()-1}}" aria-valuemin="0" aria-valuemax="{{getEnabledSteps().length}}" style="width: {{ (currentStepNumber()-1) * 100 / getEnabledSteps().length }}%;">\n            <span class=""> {{ (currentStepNumber()-1)*100/getEnabledSteps().length | currency:""}}%</span>\n          </div>\n        </div>      \n      </div>\n      <div class="hidden-xs hidden-sm col-md-8 ">\n        <div class="resume">\n          <h3>{{resume}}</h3>\n        </div>\n      </div>\n      <div class="col-xs-1">\n        <div class="pull-right">  \n            <span class="fa-stack fa-2x">\n              <i class="fa fa-question fa-stack-1x text-info"></i>\n              <i class="fa fa-circle-o fa-stack-2x text-info"></i>\n            </span>        \n        </div>\n      </div>\n    </div>\n  </div>\n    <!-- \n      <div class="steps" ng-if="indicatorsPosition === \'top\'" ng-transclude></div> \n    -->\n</div>')}]),angular.module("mgo-angular-wizard",["templates-angularwizard"]),angular.module("mgo-angular-wizard").directive("wzStep",function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{wzTitle:"@",canenter:"=",canexit:"=",disabled:"@?wzDisabled",description:"@",wzData:"=",wzOrder:"@?"},require:"^wizard",templateUrl:function(a,b){return b.template||"step.html"},link:function(a,b,c,d){c.$observe("wzTitle",function(b){a.title=a.wzTitle}),a.title=a.wzTitle,d.addStep(a),a.$on("$destroy",function(){d.removeStep(a)})}}}),angular.module("mgo-angular-wizard").directive("wizard",function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{currentStep:"=",onFinish:"&",hideIndicators:"=",editMode:"=",name:"@",subtitle:"@",indicatorsPosition:"@?",resume:"@"},templateUrl:function(a,b){return b.template||"wizard.html"},controller:["$scope","$element","$log","WizardHandler","$q","$timeout",function(a,b,c,d,e,f){function g(b){var c,d;return void 0===b.canenter?!0:"boolean"==typeof b.canenter?b.canenter:(d=b.canenter(a.context),angular.isFunction(d.then)?(c=e.defer(),d.then(function(a){c.resolve(a)}),c.promise):d===!0)}function h(b,c){var d,f;return"undefined"==typeof b.canexit||a.getStepNumber(c)<a.currentStepNumber()?!0:"boolean"==typeof b.canexit?b.canexit:(f=b.canexit(a.context),angular.isFunction(f.then)?(d=e.defer(),f.then(function(a){d.resolve(a)}),d.promise):f===!0)}function i(){angular.forEach(a.getEnabledSteps(),function(a){a.selected=!1}),a.selectedStep=null}void 0===a.indicatorsPosition&&(a.indicatorsPosition="bottom");var j=!0;d.addWizard(a.name||d.defaultName,this),a.$on("$destroy",function(){d.removeWizard(a.name||d.defaultName)}),a.steps=[];var k=function(b){var c=0,d=-1;return angular.forEach(a.getEnabledSteps(),function(a){a===b&&(d=c),c++}),d},l=function(b){var c=null;return angular.forEach(a.getEnabledSteps(),function(a){a.wzTitle===b&&(c=a)}),c};a.context={},a.$watch("currentStep",function(b){if(b){var c=a.selectedStep.wzTitle;a.selectedStep&&c!==a.currentStep&&a.goTo(l(a.currentStep))}}),a.$watch("[editMode, steps.length]",function(){var b=a.editMode;if(!angular.isUndefined(b)&&null!==b&&(angular.forEach(a.steps,function(a){a.completed=b}),!b)){var c=a.currentStepNumber()-1;angular.forEach(a.getEnabledSteps(),function(a,b){c>b&&(a.completed=!0)})}},!0),this.addStep=function(b){var c=b.wzOrder>=0&&!a.steps[b.wzOrder]?b.wzOrder:a.steps.length;a.steps[c]=b,a.getEnabledSteps()[0]===b&&a.goTo(a.getEnabledSteps()[0])},this.removeStep=function(b){var c=a.steps.indexOf(b);c>0&&a.steps.splice(c,1)},this.context=a.context,a.getStepNumber=function(a){return k(a)+1},a.goTo=function(b){if(j)i(),a.selectedStep=b,angular.isUndefined(a.currentStep)||(a.currentStep=b.wzTitle),b.selected=!0,a.$emit("wizard:stepChanged",{step:b,index:k(b)}),j=!1;else{var c;a.currentStepNumber()>0?c=a.currentStepNumber()-1:0===a.currentStepNumber()&&(c=0),e.all([h(a.getEnabledSteps()[c],b),g(b)]).then(function(c){c[0]&&c[1]&&(i(),a.selectedStep=b,angular.isUndefined(a.currentStep)||(a.currentStep=b.wzTitle),b.selected=!0,a.$emit("wizard:stepChanged",{step:b,index:k(b)}))})}},a.currentStepNumber=function(){return k(a.selectedStep)+1},a.getEnabledSteps=function(){return a.steps.filter(function(a){return a&&"true"!==a.disabled})},this.currentStepTitle=function(){return a.selectedStep.wzTitle},this.currentStepDescription=function(){return a.selectedStep.description},this.currentStep=function(){return a.selectedStep},this.totalStepCount=function(){return a.getEnabledSteps().length},this.getEnabledSteps=function(){return a.getEnabledSteps()},this.currentStepNumber=function(){return a.currentStepNumber()},this.next=function(b){var c=a.getEnabledSteps(),d=k(a.selectedStep);if(angular.isFunction(b)){if(!b())return;d===c.length-1?this.finish():a.goTo(c[d+1])}b||(a.selectedStep.completed=!0),d===c.length-1?this.finish():a.goTo(c[d+1])},this.goTo=function(b){f(function(){var c,d=a.getEnabledSteps();c=angular.isNumber(b)?d[b]:l(b),a.goTo(c)})},this.finish=function(){a.onFinish&&a.onFinish()},this.previous=function(){var b=k(a.selectedStep);if(0===b)throw new Error("Can't go back. It's already in step 0");a.goTo(a.getEnabledSteps()[b-1])},this.cancel=function(){var b=k(a.selectedStep);if(0===b)throw new Error("Can't go back. It's already in step 0");a.goTo(a.getEnabledSteps()[0])},this.reset=function(){angular.forEach(a.getEnabledSteps(),function(a){a.completed=!1}),this.goTo(0)}}]}}),wizardButtonDirective("wzNext"),wizardButtonDirective("wzPrevious"),wizardButtonDirective("wzFinish"),wizardButtonDirective("wzCancel"),wizardButtonDirective("wzReset"),angular.module("mgo-angular-wizard").factory("WizardHandler",function(){var a={},b={};return a.defaultName="defaultWizard",a.addWizard=function(a,c){b[a]=c},a.removeWizard=function(a){delete b[a]},a.wizard=function(c){var d=c;return c||(d=a.defaultName),b[d]},a});